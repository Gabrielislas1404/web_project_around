!function(){"use strict";var e={p:""},t={formSelector:".popup__content",inputSelector:".popup__input",submitButtonSelector:".popup__save-button",inactiveButtonclass:".popup__save-button:disabled",inputErrorClass:".popup__input:invalid",errorClass:".popup__line"};function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,o(r.key),r)}}function o(e){var t=function(e,t){if("object"!=n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,"string");if("object"!=n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==n(t)?t:String(t)}var i=function(){function e(t,n,r,o,i,u,c){var a=c.handleCardClick,l=c.handleLikeButtonClick,s=c.handleDeleteClick;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.likes=o,this.isLikedByCurrentUser=i,this.name=t,this.link=n,this.templateSelector=r,this.isOwnedByUser=u,this._handleCardClick=a,this._handleLikeButtonClick=l,this._handleDeleteClick=s}var t,n;return t=e,(n=[{key:"_getTemplate",value:function(){var e=this.likes.length,t=document.querySelector(this.templateSelector).content.querySelector(".elements__container").cloneNode(!0);t.querySelector(".elements__text").textContent=this.name;var n=t.querySelector(".elements__heart");this.isLikedByCurrentUser&&n.classList.add("elements__black-heart"),t.querySelector(".elements__like").textContent=e<=0?"0":e;var r=t.querySelector(".elements__image");return r.src=this.link,r.alt=this.name,t}},{key:"setIsLikedByCurrentUser",value:function(e){this.isLikedByCurrentUser=e}},{key:"getIsLikedByCurrentUser",value:function(){return this.isLikedByCurrentUser}},{key:"_setEventListeners",value:function(){var e=this,t=this._cardElement.querySelector(".elements__image"),n=this._cardElement.querySelector(".elements__heart"),r=this._cardElement.querySelector(".elements__trash"),o=this._cardElement.querySelector(".elements__like");r.addEventListener("click",(function(){e._handleDeleteClick(e._cardElement)})),t.addEventListener("click",this._handleCardClick),n.addEventListener("click",(function(){n.classList.toggle("elements__black-heart"),e._handleLikeButtonClick(o)}))}},{key:"generateCard",value:function(){return this._cardElement=this._getTemplate(),this._setEventListeners(),this.isOwnedByUser||this._cardElement.querySelector(".elements__trash").remove(),this._cardElement}}])&&r(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,a(r.key),r)}}function a(e){var t=function(e,t){if("object"!=u(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=u(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==u(t)?t:String(t)}var l=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.validationConfig=t,this.formElement=n}var t,n;return t=e,(n=[{key:"_hideInputError",value:function(e,t){var n=e.querySelector(t);n.textContent="",n.classList.remove(this.validationConfig.errorClass)}},{key:"_showInputError",value:function(e,t,n,r){var o=e.querySelector(t);o.textContent=r,o.classList.add(n.errorClass)}},{key:"_checkInputValidity",value:function(e,t){e.validity.valid?this._hideInputError(e.form,"#input__error-".concat(e.name),t):this._showInputError(e.form,"#input__error-".concat(e.name),this.validationConfig,e.validationMessage),this._toggleButton(e.form,t)}},{key:"_toggleButton",value:function(e,t){var n=Array.from(e.querySelectorAll(t.inputSelector)),r=e.querySelector(t.submitButtonSelector);n.every((function(e){return e.validity.valid}))?(r.disabled=!1,r.classList.remove(t.inactiveButtonClass)):(r.disabled=!0,r.classList.add(t.inactiveButtonClass))}},{key:"enableValidation",value:function(e){var t=this;Array.from(document.forms).forEach((function(e){e.addEventListener("submit",(function(e){e.preventDefault()})),Array.from(e.querySelectorAll(t.validationConfig.inputSelector)).forEach((function(e){e.addEventListener("input",(function(){t._checkInputValidity(e,t.validationConfig)}))})),t._toggleButton(e,t.validationConfig)}))}}])&&c(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,p(r.key),r)}}function p(e){var t=function(e,t){if("object"!=s(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=s(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==s(t)?t:String(t)}var y=function(){function e(t,n){var r=t.items,o=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._items=r,this._renderer=o,this._container=document.querySelector(n)}var t,n;return t=e,(n=[{key:"clear",value:function(){this._container.innerHTML=""}},{key:"addItem",value:function(e){this._container.appendChild(e)}},{key:"renderer",value:function(){var e=this;this.clear(),this._items.forEach((function(t){e._renderer(t)}))}}])&&f(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function d(e){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d(e)}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,m(r.key),r)}}function m(e){var t=function(e,t){if("object"!=d(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=d(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==d(t)?t:String(t)}var v=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.popupSelector=t,this._popupElement=document.querySelector("".concat(this.popupSelector)),this._popupCloseButton=this._popupElement.querySelector(".popup__close-button"),this._popupCloseOverlay=this._popupElement.querySelector(".popup__overlay"),this._handleEscClose=this._handleEscClose.bind(this),this.setEventListeners()}var t,n;return t=e,(n=[{key:"open",value:function(){this._popupElement.classList.add("popup_hide"),document.addEventListener("keydown",this._handleEscClose)}},{key:"close",value:function(){this._popupElement.classList.remove("popup_hide"),document.removeEventListener("keydown",this._handleEscClose)}},{key:"_handleEscClose",value:function(e){"Escape"===e.key&&this.close()}},{key:"setEventListeners",value:function(){var e=this;this._popupCloseButton.addEventListener("click",(function(){e.close()})),this._popupCloseOverlay.addEventListener("click",(function(){e.close()}))}}])&&h(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function b(e){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},b(e)}function _(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,S(r.key),r)}}function S(e){var t=function(e,t){if("object"!=b(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=b(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==b(t)?t:String(t)}function k(e,t,n){return t=C(t),function(e,t){if(t&&("object"===b(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,w()?Reflect.construct(t,n||[],C(e).constructor):t.apply(e,n))}function w(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(w=function(){return!!e})()}function g(){return g="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=C(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},g.apply(this,arguments)}function C(e){return C=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},C(e)}function E(e,t){return E=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},E(e,t)}var O=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=k(this,t,[e]))._popupImage=n._popupElement.querySelector(".popup__picture"),n._popupTitle=n._popupElement.querySelector(".popup__card-name"),n}var n,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&E(e,t)}(t,e),n=t,(r=[{key:"open",value:function(e,n){this._popupImage.src=e,this._popupImage.alt=n,this._popupTitle.textContent=n,g(C(t.prototype),"open",this).call(this)}}])&&_(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),t}(v);function j(e){return j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},j(e)}function P(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,L(r.key),r)}}function L(e){var t=function(e,t){if("object"!=j(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=j(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==j(t)?t:String(t)}function q(e,t,n){return t=T(t),function(e,t){if(t&&("object"===j(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,B()?Reflect.construct(t,n||[],T(e).constructor):t.apply(e,n))}function B(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(B=function(){return!!e})()}function I(){return I="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=T(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},I.apply(this,arguments)}function T(e){return T=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},T(e)}function U(e,t){return U=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},U(e,t)}var x=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=q(this,t,[e]))._submitCallBack=n,r}var n,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&U(e,t)}(t,e),n=t,(r=[{key:"close",value:function(){this._popupElement.querySelector("form"),I(T(t.prototype),"close",this).call(this)}},{key:"_getInputValues",value:function(){var e={},t=this._popupElement.querySelector("form");return Array.from(t.querySelectorAll("input")).forEach((function(t){e[t.name]=t.value})),e}},{key:"setEventListeners",value:function(){var e=this;I(T(t.prototype),"setEventListeners",this).call(this),this._popupElement.querySelector("form").addEventListener("submit",(function(t){t.preventDefault(),e._submitCallBack(e._getInputValues()),e.close()}))}}])&&P(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),t}(v);function D(e){return D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},D(e)}function R(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,N(r.key),r)}}function N(e){var t=function(e,t){if("object"!=D(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=D(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==D(t)?t:String(t)}var A=function(){function e(t,n){var r=t.userNameSelector,o=t.occupationSelector;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._userName=document.querySelector(r),this._userOccupation=document.querySelector(o),this._userId}var t,n;return t=e,(n=[{key:"setUserId",value:function(e){this._userId=e}},{key:"getUserId",value:function(){return this._userId}},{key:"getUserInfo",value:function(){return{userName:this._userName.textContent,userOccupation:this._userOccupation.textContent}}},{key:"setUserInfo",value:function(e){var t=e.name,n=e.about;console.log(this.userName),this._userName.textContent=t,this._userOccupation.textContent=n}}])&&R(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function V(e){return V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},V(e)}function J(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,G(r.key),r)}}function G(e){var t=function(e,t){if("object"!=V(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=V(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==V(t)?t:String(t)}function H(e,t,n){return t=K(t),function(e,t){if(t&&("object"===V(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return z(e)}(e,M()?Reflect.construct(t,n||[],K(e).constructor):t.apply(e,n))}function M(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(M=function(){return!!e})()}function z(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function F(){return F="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=K(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},F.apply(this,arguments)}function K(e){return K=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},K(e)}function Q(e,t){return Q=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Q(e,t)}var W=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=H(this,t,[e]))._handleConfirm=r._handleConfirm.bind(z(r)),r._handleClickConfirm=r._handleClickConfirm.bind(z(r)),r._api=n,r._buttonDelete=document.querySelector(".popup__save-button_delete"),r}var n,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Q(e,t)}(t,e),n=t,(r=[{key:"_handleConfirm",value:function(e){e.preventDefault()}},{key:"_handleClickConfirm",value:function(){var e=this;this._buttonDelete.textContent="Eliminando...",this._api.deleteCard(this._idCard).then((function(){e._cardElement.remove(),e.close()}))}},{key:"openPopup",value:function(e,n){this._cardElement=n,F(K(t.prototype),"open",this).call(this),this._buttonDelete.textContent="Sí",this._idCard=e}},{key:"setEventListeners",value:function(){var e=this;F(K(t.prototype),"setEventListeners",this).call(this),this._popupElement.querySelector("form").addEventListener("submit",(function(t){t.preventDefault(),e._handleClickConfirm()}))}}])&&J(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),t}(v),X=(e.p,e.p,e.p,e.p,e.p,e.p,document.querySelector(".profile__picture-button")),Y=document.querySelector(".profile__button"),Z=document.querySelector(".profile__name"),$=document.querySelector(".profile__about-me"),ee=document.querySelector(".profile__picture"),te=(document.forms.edit,document.querySelector(".popup__input_name")),ne=document.querySelector(".popup__input_occupation"),re=(document.querySelector(".popup__input_title"),document.querySelector(".popup__input_link"),document.querySelector(".profile__add-button")),oe=document.querySelector(".elements"),ie=(document.querySelector(".elements__heart"),document.querySelector(".popup__content_add")),ue=document.querySelector(".popup__content"),ce=document.querySelector(".popup__save-button"),ae=document.querySelector(".popup__save-button_avatar"),le=(document.querySelector(".popup__save-button_picture"),document.querySelector(".popup_profile-button")),se=(document.querySelector(".popup__content_profile"),document.querySelector("#popup__avatar-input"));function fe(e){return fe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fe(e)}function pe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ye(r.key),r)}}function ye(e){var t=function(e,t){if("object"!=fe(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=fe(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==fe(t)?t:String(t)}var de=new(function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.baseUrl=t,this.headers=n}var t,n;return t=e,(n=[{key:"getInitialCards",value:function(){return fetch("".concat(this.baseUrl,"/cards"),{headers:this.headers}).then((function(e){if(!e.ok)throw new Error("Server error: ".concat(e.status));return e.json()})).catch((function(e){return console.error("Error",e)}))}},{key:"getUserInfo",value:function(){return fetch("".concat(this.baseUrl,"/users/me"),{headers:this.headers}).then((function(e){if(!e.ok)throw new Error("Server error: ".concat(e.status));return e.json()})).catch((function(e){return console.error("Error",e)}))}},{key:"updateUser",value:function(e,t){return console.log("update user",e,t),fetch("".concat(this.baseUrl,"/users/me"),{headers:this.headers,method:"PATCH",body:JSON.stringify({name:e,about:t})}).then((function(e){if(!e.ok)throw new Error("Error en servidor: ".concat(e.status));return e.json()})).catch((function(e){return console.error("Error",e)}))}},{key:"updateAvatar",value:function(e){return fetch("".concat(this.baseUrl,"/users/me/avatar"),{headers:this.headers,method:"PATCH",body:JSON.stringify({avatar:e})}).then((function(e){if(!e.ok)throw new Error("Error en servidor: ".concat(e.status));return e.json()})).catch((function(e){return console.error("Error",e)}))}},{key:"addCard",value:function(e,t){return fetch("".concat(this.baseUrl,"/cards"),{headers:this.headers,method:"POST",body:JSON.stringify({name:e,link:t})}).then((function(e){if(!e.ok)throw new Error("Error en servidor: ".concat(e.status));return e.json()})).catch((function(e){return console.error("Error",e)}))}},{key:"deleteCard",value:function(e){return fetch("".concat(this.baseUrl,"/cards/").concat(e),{headers:this.headers,method:"DELETE",body:JSON.stringify({idCard:e})}).then((function(e){if(!e.ok)throw new Error("Error en servidor: ".concat(e.status));return e.json()})).catch((function(e){return console.error("Error",e)}))}},{key:"likeCard",value:function(e){return fetch("".concat(this.baseUrl,"/cards/likes/").concat(e),{headers:this.headers,method:"PUT",body:JSON.stringify({id:e})}).then((function(e){if(!e.ok)throw new Error("Error en servidor: ".concat(e.status));return e.json()})).catch((function(e){return console.error("Error",e)}))}},{key:"unlikeCard",value:function(e){return fetch("".concat(this.baseUrl,"/cards/likes/").concat(e),{headers:this.headers,method:"DELETE",body:JSON.stringify({id:e})}).then((function(e){if(!e.ok)throw new Error("Error en servidor: ".concat(e.status));return e.json()})).catch((function(e){return console.error("Error",e)}))}}])&&pe(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}())("https://around.nomoreparties.co/v1/web_es_12",{authorization:"fa25d0a0-1783-4d33-9dd9-ca8f33a53e6d","Content-Type":"application/json"}),he=new W(".popup_erase-photo",de);Y.addEventListener("click",(function(){var e=Se.getUserInfo();te.value=e.userName,ne.value=e.userOccupation,ve.open(),we.enableValidation()})),re.addEventListener("click",(function(){_e.open(),ge.enableValidation()})),X.addEventListener("click",(function(){be.open(),ge.enableValidation()}));var me=new O(".popup_image"),ve=new x(".popup",(function(e){Z.textContent=e.name,$.textContent=ne.value,ve.close()})),be=new x(".popup_profile-button",(function(e){ee.src=e.link,be.close()})),_e=new x(".popup_add-button",(function(e){de.addCard(e.title,e.link).then((function(e){var t=new i(e.name,e.link,"#card-template",[],!1,!0,{handleCardClick:function(){me.open(e.link,e.name)},handleLikeButtonClick:function(n){t.getIsLikedByCurrentUser()?de.unlikeCard(e._id).then((function(e){t.setIsLikedByCurrentUser(!1),n.textContent=e.likes.length})).catch((function(e){return console.warn(e)})):de.likeCard(e._id).then((function(e){t.setIsLikedByCurrentUser(!0),n.textContent=e.likes.length})).catch((function(e){return console.warn(e)}))},handleDeleteClick:function(t){he.openPopup(e._id,t)}});oe.prepend(t.generateCard())})).catch((function(e){console.warn("error:".concat(e.message))}))})),Se=new A({userNameSelector:".profile__name",occupationSelector:".profile__about-me"});de.getUserInfo().then((function(e){Z.textContent=e.name,$.textContent=e.about,ee.src=e.avatar,ee.alt=e.name,Se.setUserId(e._id)})).catch((function(e){console.warn("error:".concat(e.message))})),de.getInitialCards().then((function(e){var t=Se.getUserId(),n=new y({items:e,renderer:function(e){var r=t===e.owner._id,o=function(e,t){return!!e.find((function(e){return e._id===t}))}(e.likes,t),u=new i(e.name,e.link,"#card-template",e.likes,o,r,{handleCardClick:function(){me.open(e.link,e.name)},handleLikeButtonClick:function(t){u.getIsLikedByCurrentUser()?de.unlikeCard(e._id).then((function(e){u.setIsLikedByCurrentUser(!1),t.textContent=e.likes.length})).catch((function(e){return console.warn(e)})):de.likeCard(e._id).then((function(e){u.setIsLikedByCurrentUser(!0),t.textContent=e.likes.length})).catch((function(e){return console.warn(e)}))},handleDeleteClick:function(t){he.openPopup(e._id,t)}});n.addItem(u.generateCard())}},".elements");n.renderer()})),new A(Z,$),Y.addEventListener("click",(function(){ke.open(),ce.textContent="Guardar",ke._getInputValues()}));var ke=new x(".popup",(function(e){ce.textContent="Guardando...",de.updateUser(e.name,e.occupation)}));le.addEventListener("submit",(function(e){e.preventDefault(),ae.textContent="Guardando...",de.updateAvatar(se.value).then((function(e){ee.src=e.avatar,ee.alt="Avatar",ae.textContent="Guardar",se.value=""})).catch((function(e){console.error("Error",e)}))}));var we=new l(t,ue);we.enableValidation();var ge=new l(t,ie);ge.enableValidation()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LElBQUl1SCxFQUFTMUQsRUFBYUMsR0FDOUNGLEVBQVdqRyxpQkFBaUIsU0FBUyxXQUNuQ3VLLEdBQVlqQyxPQUNaMUIsR0FBV3pILFlBQWMsVUFDekJvTCxHQUFZbEcsaUJBQ2QsSUFFQSxJQUFNa0csR0FBYyxJQUFJdkcsRUFBYyxVQUFVLFNBQUNHLEdBQy9DeUMsR0FBV3pILFlBQWMsZUFFekI2SCxHQUFJd0QsV0FBV3JHLEVBQVl4RyxLQUFNd0csRUFBWXNHLFdBVS9DLElBbUNBM0QsR0FBZ0I5RyxpQkFBaUIsVUFBVSxTQUFDK0IsR0FDMUNBLEVBQU1DLGlCQUNONkUsR0FBaUIxSCxZQUFjLGVBQy9CNkgsR0FDRzBELGFBQWEzRCxHQUFZcEksT0FDekJrSCxNQUFLLFNBQUN3QixHQUNMakIsR0FBZTVHLElBQU02SCxFQUFJVyxPQUN6QjVCLEdBQWUzRyxJQUFNLFNBQ3JCb0gsR0FBaUIxSCxZQUFjLFVBQy9CNEgsR0FBWXBJLE1BQVEsRUFDdEIsSUFDQytJLE9BQU0sU0FBQ0MsR0FDTnpDLFFBQVF5QyxNQUFNLFFBQVNBLEVBQ3pCLEdBQ0osSUFzQkEsSUFBTVksR0FBdUIsSUFBSWxJLEVBQWNsRCxFQUFrQndKLElBQ2pFNEIsR0FBcUJDLG1CQUVyQixJQUFNRSxHQUFvQixJQUFJckksRUFBY2xELEVBQWtCdUosSUFDOURnQyxHQUFrQkYsa0IiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93ZWJfcHJvamVjdF9hcm91bmQvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfYXJvdW5kL3dlYnBhY2svcnVudGltZS9wdWJsaWNQYXRoIiwid2VicGFjazovL3dlYl9wcm9qZWN0X2Fyb3VuZC8uL3NyYy9zY3JpcHRzL3V0aWxzLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0X2Fyb3VuZC8uL3NyYy9zY3JpcHRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfYXJvdW5kLy4vc3JjL3NjcmlwdHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF9hcm91bmQvLi9zcmMvc2NyaXB0cy9TZWN0aW9uLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0X2Fyb3VuZC8uL3NyYy9zY3JpcHRzL1BvcHVwLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0X2Fyb3VuZC8uL3NyYy9zY3JpcHRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0X2Fyb3VuZC8uL3NyYy9zY3JpcHRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfYXJvdW5kLy4vc3JjL3NjcmlwdHMvVXNlckluZm8uanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfYXJvdW5kLy4vc3JjL3NjcmlwdHMvUG9wdXBXaXRoQ29uZmlybWF0aW9uLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0X2Fyb3VuZC8uL3NyYy9zY3JpcHRzL0NvbnN0LmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0X2Fyb3VuZC8uL3NyYy91dGlscy9BcGkuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfYXJvdW5kLy4vc3JjL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIFRoZSByZXF1aXJlIHNjb3BlXG52YXIgX193ZWJwYWNrX3JlcXVpcmVfXyA9IHt9O1xuXG4iLCJfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiOyIsImV4cG9ydCBmdW5jdGlvbiByZW1vdmVDYXJkKGNhcmRFbGVtZW50KSB7XG4gIGNhcmRFbGVtZW50LnJlbW92ZSgpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdG9nZ2xlTGlrZShidXR0b25IZWFydCkge1xuICBidXR0b25IZWFydC5jbGFzc0xpc3QudG9nZ2xlKFwiZWxlbWVudHNfX2JsYWNrLWhlYXJ0XCIpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gY2hlY2tJc0xpa2VkKGxpa2VzLCB1c2VySWQpIHtcbiAgY29uc3QgaXNMaWtlZCA9IGxpa2VzLmZpbmQoKGxpa2UpID0+IHtcbiAgICByZXR1cm4gbGlrZS5faWQgPT09IHVzZXJJZDtcbiAgfSk7XG4gIHJldHVybiBpc0xpa2VkID8gdHJ1ZSA6IGZhbHNlO1xufVxuXG5leHBvcnQgY29uc3QgdmFsaWRhdGlvbkNvbmZpZyA9IHtcbiAgZm9ybVNlbGVjdG9yOiBcIi5wb3B1cF9fY29udGVudFwiLFxuICBpbnB1dFNlbGVjdG9yOiBcIi5wb3B1cF9faW5wdXRcIixcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLnBvcHVwX19zYXZlLWJ1dHRvblwiLFxuICBpbmFjdGl2ZUJ1dHRvbmNsYXNzOiBcIi5wb3B1cF9fc2F2ZS1idXR0b246ZGlzYWJsZWRcIixcbiAgaW5wdXRFcnJvckNsYXNzOiBcIi5wb3B1cF9faW5wdXQ6aW52YWxpZFwiLFxuICBlcnJvckNsYXNzOiBcIi5wb3B1cF9fbGluZVwiLFxufTtcbiIsImltcG9ydCB7IHJlbW92ZUNhcmQsIHRvZ2dsZUxpa2UgfSBmcm9tIFwiLi91dGlscy5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBDYXJkIHtcbiAgY29uc3RydWN0b3IoXG4gICAgbmFtZSxcbiAgICBsaW5rLFxuICAgIHRlbXBsYXRlU2VsZWN0b3IsXG4gICAgbGlrZXMsXG4gICAgaXNMaWtlZEJ5Q3VycmVudFVzZXIsXG4gICAgaXNPd25lZEJ5VXNlcixcbiAgICB7IGhhbmRsZUNhcmRDbGljaywgaGFuZGxlTGlrZUJ1dHRvbkNsaWNrLCBoYW5kbGVEZWxldGVDbGljayB9XG4gICkge1xuICAgIHRoaXMubGlrZXMgPSBsaWtlcztcbiAgICB0aGlzLmlzTGlrZWRCeUN1cnJlbnRVc2VyID0gaXNMaWtlZEJ5Q3VycmVudFVzZXI7XG4gICAgdGhpcy5uYW1lID0gbmFtZTtcbiAgICB0aGlzLmxpbmsgPSBsaW5rO1xuICAgIHRoaXMudGVtcGxhdGVTZWxlY3RvciA9IHRlbXBsYXRlU2VsZWN0b3I7XG4gICAgdGhpcy5pc093bmVkQnlVc2VyID0gaXNPd25lZEJ5VXNlcjtcbiAgICB0aGlzLl9oYW5kbGVDYXJkQ2xpY2sgPSBoYW5kbGVDYXJkQ2xpY2s7XG4gICAgdGhpcy5faGFuZGxlTGlrZUJ1dHRvbkNsaWNrID0gaGFuZGxlTGlrZUJ1dHRvbkNsaWNrO1xuICAgIHRoaXMuX2hhbmRsZURlbGV0ZUNsaWNrID0gaGFuZGxlRGVsZXRlQ2xpY2s7XG4gIH1cblxuICBfZ2V0VGVtcGxhdGUoKSB7XG4gICAgY29uc3QgbGlrZXNOdW1iZXIgPSB0aGlzLmxpa2VzLmxlbmd0aDtcbiAgICBjb25zdCBjYXJkVGVtcGxhdGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRoaXMudGVtcGxhdGVTZWxlY3RvcikuY29udGVudDtcbiAgICBjb25zdCBjYXJkRWxlbWVudCA9IGNhcmRUZW1wbGF0ZVxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudHNfX2NvbnRhaW5lclwiKVxuICAgICAgLmNsb25lTm9kZSh0cnVlKTtcbiAgICBjYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRzX190ZXh0XCIpLnRleHRDb250ZW50ID0gdGhpcy5uYW1lO1xuICAgIGNvbnN0IGhlYXJ0SWNvbiA9IGNhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudHNfX2hlYXJ0XCIpO1xuICAgIHRoaXMuaXNMaWtlZEJ5Q3VycmVudFVzZXIgJiZcbiAgICAgIGhlYXJ0SWNvbi5jbGFzc0xpc3QuYWRkKFwiZWxlbWVudHNfX2JsYWNrLWhlYXJ0XCIpO1xuICAgIGNvbnN0IGhlYXJ0TGlrZXMgPSBjYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRzX19saWtlXCIpO1xuICAgIGhlYXJ0TGlrZXMudGV4dENvbnRlbnQgPSBsaWtlc051bWJlciA8PSAwID8gXCIwXCIgOiBsaWtlc051bWJlcjtcblxuICAgIGNvbnN0IGNhcmRJbWFnZSA9IGNhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudHNfX2ltYWdlXCIpO1xuICAgIGNhcmRJbWFnZS5zcmMgPSB0aGlzLmxpbms7XG4gICAgY2FyZEltYWdlLmFsdCA9IHRoaXMubmFtZTtcblxuICAgIHJldHVybiBjYXJkRWxlbWVudDtcbiAgfVxuXG4gIHNldElzTGlrZWRCeUN1cnJlbnRVc2VyKGlzTGlrZWRCeUN1cnJlbnRVc2VyKSB7XG4gICAgLy9leHBlY3RzIGEgYm9vbGVhblxuICAgIHRoaXMuaXNMaWtlZEJ5Q3VycmVudFVzZXIgPSBpc0xpa2VkQnlDdXJyZW50VXNlcjtcbiAgfVxuXG4gIGdldElzTGlrZWRCeUN1cnJlbnRVc2VyKCkge1xuICAgIHJldHVybiB0aGlzLmlzTGlrZWRCeUN1cnJlbnRVc2VyO1xuICB9XG5cbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIGNvbnN0IG9wZW5JbWFnZSA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudHNfX2ltYWdlXCIpO1xuXG4gICAgY29uc3QgYnV0dG9uTGlrZSA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudHNfX2hlYXJ0XCIpO1xuXG4gICAgY29uc3QgYnV0dG9uRGVsZXRlID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50c19fdHJhc2hcIik7XG5cbiAgICBjb25zdCBsaWtlTnVtYmVyID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50c19fbGlrZVwiKTtcblxuICAgIGJ1dHRvbkRlbGV0ZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgdGhpcy5faGFuZGxlRGVsZXRlQ2xpY2sodGhpcy5fY2FyZEVsZW1lbnQpO1xuICAgIH0pO1xuXG4gICAgb3BlbkltYWdlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLl9oYW5kbGVDYXJkQ2xpY2spO1xuXG4gICAgYnV0dG9uTGlrZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgdG9nZ2xlTGlrZShidXR0b25MaWtlKTtcbiAgICAgIHRoaXMuX2hhbmRsZUxpa2VCdXR0b25DbGljayhsaWtlTnVtYmVyKTtcbiAgICB9KTtcbiAgfVxuXG4gIGdlbmVyYXRlQ2FyZCgpIHtcbiAgICB0aGlzLl9jYXJkRWxlbWVudCA9IHRoaXMuX2dldFRlbXBsYXRlKCk7XG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgICBpZiAoIXRoaXMuaXNPd25lZEJ5VXNlcikge1xuICAgICAgdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50c19fdHJhc2hcIikucmVtb3ZlKCk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLl9jYXJkRWxlbWVudDtcbiAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgRm9ybVZhbGlkYXRvciB7XG4gIGNvbnN0cnVjdG9yKHZhbGlkYXRpb25Db25maWcsIGZvcm1FbGVtZW50KSB7XG4gICAgdGhpcy52YWxpZGF0aW9uQ29uZmlnID0gdmFsaWRhdGlvbkNvbmZpZztcbiAgICB0aGlzLmZvcm1FbGVtZW50ID0gZm9ybUVsZW1lbnQ7XG4gIH1cblxuICBfaGlkZUlucHV0RXJyb3IoZm9ybSwgZXJyb3JTZWxlY3Rvcikge1xuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IGZvcm0ucXVlcnlTZWxlY3RvcihlcnJvclNlbGVjdG9yKTtcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBcIlwiO1xuICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMudmFsaWRhdGlvbkNvbmZpZy5lcnJvckNsYXNzKTtcbiAgfVxuXG4gIF9zaG93SW5wdXRFcnJvcihmb3JtLCBlcnJvclNlbGVjdG9yLCBjb25maWcsIGVycm9yTWVzc2FnZSkge1xuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IGZvcm0ucXVlcnlTZWxlY3RvcihlcnJvclNlbGVjdG9yKTtcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBlcnJvck1lc3NhZ2U7XG4gICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5hZGQoY29uZmlnLmVycm9yQ2xhc3MpO1xuICB9XG5cbiAgX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dCwgY29uZmlnKSB7XG4gICAgaWYgKGlucHV0LnZhbGlkaXR5LnZhbGlkKSB7XG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dC5mb3JtLCBgI2lucHV0X19lcnJvci0ke2lucHV0Lm5hbWV9YCwgY29uZmlnKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fc2hvd0lucHV0RXJyb3IoXG4gICAgICAgIGlucHV0LmZvcm0sXG4gICAgICAgIGAjaW5wdXRfX2Vycm9yLSR7aW5wdXQubmFtZX1gLFxuICAgICAgICB0aGlzLnZhbGlkYXRpb25Db25maWcsXG4gICAgICAgIGlucHV0LnZhbGlkYXRpb25NZXNzYWdlXG4gICAgICApO1xuICAgIH1cbiAgICB0aGlzLl90b2dnbGVCdXR0b24oaW5wdXQuZm9ybSwgY29uZmlnKTtcbiAgfVxuXG4gIF90b2dnbGVCdXR0b24oZm9ybSwgY29uZmlnKSB7XG4gICAgY29uc3QgaW5wdXRzID0gQXJyYXkuZnJvbShmb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoY29uZmlnLmlucHV0U2VsZWN0b3IpKTtcbiAgICBjb25zdCBzdWJtaXRCdXR0b24gPSBmb3JtLnF1ZXJ5U2VsZWN0b3IoY29uZmlnLnN1Ym1pdEJ1dHRvblNlbGVjdG9yKTtcbiAgICBpZiAoaW5wdXRzLmV2ZXJ5KChpdGVtKSA9PiBpdGVtLnZhbGlkaXR5LnZhbGlkKSkge1xuICAgICAgc3VibWl0QnV0dG9uLmRpc2FibGVkID0gZmFsc2U7XG4gICAgICBzdWJtaXRCdXR0b24uY2xhc3NMaXN0LnJlbW92ZShjb25maWcuaW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHN1Ym1pdEJ1dHRvbi5kaXNhYmxlZCA9IHRydWU7XG4gICAgICBzdWJtaXRCdXR0b24uY2xhc3NMaXN0LmFkZChjb25maWcuaW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gICAgfVxuICB9XG5cbiAgZW5hYmxlVmFsaWRhdGlvbihjb25maWcpIHtcbiAgICBjb25zdCBmb3JtcyA9IEFycmF5LmZyb20oZG9jdW1lbnQuZm9ybXMpO1xuXG4gICAgZm9ybXMuZm9yRWFjaCgoZm9ybSkgPT4ge1xuICAgICAgZm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldmVudCkgPT4ge1xuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IGlucHV0cyA9IEFycmF5LmZyb20oXG4gICAgICAgIGZvcm0ucXVlcnlTZWxlY3RvckFsbCh0aGlzLnZhbGlkYXRpb25Db25maWcuaW5wdXRTZWxlY3RvcilcbiAgICAgICk7XG4gICAgICBpbnB1dHMuZm9yRWFjaCgoaW5wdXQpID0+IHtcbiAgICAgICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsICgpID0+IHtcbiAgICAgICAgICB0aGlzLl9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXQsIHRoaXMudmFsaWRhdGlvbkNvbmZpZyk7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgICB0aGlzLl90b2dnbGVCdXR0b24oZm9ybSwgdGhpcy52YWxpZGF0aW9uQ29uZmlnKTtcbiAgICB9KTtcbiAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VjdGlvbiB7XG4gIGNvbnN0cnVjdG9yKHsgaXRlbXMsIHJlbmRlcmVyIH0sIGNvbnRhaW5lclNlbGVjdG9yKSB7XG4gICAgdGhpcy5faXRlbXMgPSBpdGVtcztcbiAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xuICAgIHRoaXMuX2NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY29udGFpbmVyU2VsZWN0b3IpO1xuICB9XG5cbiAgY2xlYXIoKSB7XG4gICAgdGhpcy5fY29udGFpbmVyLmlubmVySFRNTCA9IFwiXCI7XG4gIH1cbiAgYWRkSXRlbShjYXJkRWxlbWVudCkge1xuICAgIHRoaXMuX2NvbnRhaW5lci5hcHBlbmRDaGlsZChjYXJkRWxlbWVudCk7XG4gIH1cblxuICByZW5kZXJlcigpIHtcbiAgICB0aGlzLmNsZWFyKCk7XG4gICAgdGhpcy5faXRlbXMuZm9yRWFjaCgoaXRlbSkgPT4ge1xuICAgICAgdGhpcy5fcmVuZGVyZXIoaXRlbSk7XG4gICAgfSk7XG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xuICAgIHRoaXMucG9wdXBTZWxlY3RvciA9IHBvcHVwU2VsZWN0b3I7XG4gICAgdGhpcy5fcG9wdXBFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgJHt0aGlzLnBvcHVwU2VsZWN0b3J9YCk7XG4gICAgdGhpcy5fcG9wdXBDbG9zZUJ1dHRvbiA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxuICAgICAgXCIucG9wdXBfX2Nsb3NlLWJ1dHRvblwiXG4gICAgKTtcbiAgICB0aGlzLl9wb3B1cENsb3NlT3ZlcmxheSA9XG4gICAgICB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fb3ZlcmxheVwiKTtcbiAgICB0aGlzLl9oYW5kbGVFc2NDbG9zZSA9IHRoaXMuX2hhbmRsZUVzY0Nsb3NlLmJpbmQodGhpcyk7XG4gICAgdGhpcy5zZXRFdmVudExpc3RlbmVycygpO1xuICB9XG5cbiAgb3BlbigpIHtcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcInBvcHVwX2hpZGVcIik7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xuICB9XG5cbiAgY2xvc2UoKSB7XG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJwb3B1cF9oaWRlXCIpO1xuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcbiAgfVxuXG4gIF9oYW5kbGVFc2NDbG9zZShldmVudCkge1xuICAgIGlmIChldmVudC5rZXkgPT09IFwiRXNjYXBlXCIpIHtcbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICB9XG4gIH1cblxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl9wb3B1cENsb3NlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICB0aGlzLmNsb3NlKCk7XG4gICAgfSk7XG4gICAgdGhpcy5fcG9wdXBDbG9zZU92ZXJsYXkuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICB9KTtcbiAgfVxufVxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XG4gICAgdGhpcy5fcG9wdXBJbWFnZSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19waWN0dXJlXCIpO1xuICAgIHRoaXMuX3BvcHVwVGl0bGUgPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fY2FyZC1uYW1lXCIpO1xuICB9XG5cbiAgb3BlbihsaW5rLCBuYW1lKSB7XG4gICAgdGhpcy5fcG9wdXBJbWFnZS5zcmMgPSBsaW5rO1xuICAgIHRoaXMuX3BvcHVwSW1hZ2UuYWx0ID0gbmFtZTtcbiAgICB0aGlzLl9wb3B1cFRpdGxlLnRleHRDb250ZW50ID0gbmFtZTtcbiAgICBzdXBlci5vcGVuKCk7XG4gIH1cbn1cbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yLCBjYWxsYmFjaykge1xuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xuICAgIHRoaXMuX3N1Ym1pdENhbGxCYWNrID0gY2FsbGJhY2s7XG4gIH1cblxuICBjbG9zZSgpIHtcbiAgICBjb25zdCBmb3JtID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCJmb3JtXCIpO1xuICAgIHN1cGVyLmNsb3NlKCk7XG4gIH1cblxuICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XG4gICAgY29uc3QgaW5wdXRWYWx1ZXMgPSB7fTtcbiAgICBjb25zdCBmb3JtID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCJmb3JtXCIpO1xuICAgIEFycmF5LmZyb20oZm9ybS5xdWVyeVNlbGVjdG9yQWxsKFwiaW5wdXRcIikpLmZvckVhY2goKGlucHV0KSA9PiB7XG4gICAgICBpbnB1dFZhbHVlc1tpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlO1xuICAgIH0pO1xuICAgIHJldHVybiBpbnB1dFZhbHVlcztcbiAgfVxuXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgY29uc3QgZm9ybSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiZm9ybVwiKTtcbiAgICBmb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGV2ZW50KSA9PiB7XG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgdGhpcy5fc3VibWl0Q2FsbEJhY2sodGhpcy5fZ2V0SW5wdXRWYWx1ZXMoKSk7XG4gICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAvKiBmb3JtLnJlc2V0KCk7ICovXG4gICAgfSk7XG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIHVzZXJJbmZvIHtcbiAgY29uc3RydWN0b3IoeyB1c2VyTmFtZVNlbGVjdG9yLCBvY2N1cGF0aW9uU2VsZWN0b3IgfSwgdXNlcklkKSB7XG4gICAgdGhpcy5fdXNlck5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHVzZXJOYW1lU2VsZWN0b3IpO1xuICAgIHRoaXMuX3VzZXJPY2N1cGF0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihvY2N1cGF0aW9uU2VsZWN0b3IpO1xuICAgIHRoaXMuX3VzZXJJZDtcbiAgfVxuXG4gIHNldFVzZXJJZChpZCkge1xuICAgIHRoaXMuX3VzZXJJZCA9IGlkO1xuICB9XG5cbiAgZ2V0VXNlcklkKCkge1xuICAgIHJldHVybiB0aGlzLl91c2VySWQ7XG4gIH1cblxuICBnZXRVc2VySW5mbygpIHtcbiAgICByZXR1cm4ge1xuICAgICAgdXNlck5hbWU6IHRoaXMuX3VzZXJOYW1lLnRleHRDb250ZW50LFxuICAgICAgdXNlck9jY3VwYXRpb246IHRoaXMuX3VzZXJPY2N1cGF0aW9uLnRleHRDb250ZW50LFxuICAgIH07XG4gIH1cblxuICBzZXRVc2VySW5mbyh7IG5hbWUsIGFib3V0IH0pIHtcbiAgICBjb25zb2xlLmxvZyh0aGlzLnVzZXJOYW1lKTtcbiAgICB0aGlzLl91c2VyTmFtZS50ZXh0Q29udGVudCA9IG5hbWU7XG4gICAgdGhpcy5fdXNlck9jY3VwYXRpb24udGV4dENvbnRlbnQgPSBhYm91dDtcbiAgfVxufVxuXG4vKiBzZXRVc2VySW5mbyh7IHVzZXJOYW1lLCB1c2VyT2NjdXBhdGlvbiB9KSB7XG4gICAgdGhpcy5fdXNlck5hbWUudGV4dENvbnRlbnQgPSB1c2VyTmFtZTtcbiAgICB0aGlzLl91c2VyT2NjdXBhdGlvbi50ZXh0Q29udGVudCA9IHVzZXJPY2N1cGF0aW9uO1xuICB9XG59ICovXG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcbmltcG9ydCB7IHJlbW92ZUNhcmQgfSBmcm9tIFwiLi91dGlscy5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhDb25maXJtYXRpb24gZXh0ZW5kcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IsIGFwaUluc3RhbmNlKSB7XG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XG4gICAgdGhpcy5faGFuZGxlQ29uZmlybSA9IHRoaXMuX2hhbmRsZUNvbmZpcm0uYmluZCh0aGlzKTtcbiAgICB0aGlzLl9oYW5kbGVDbGlja0NvbmZpcm0gPSB0aGlzLl9oYW5kbGVDbGlja0NvbmZpcm0uYmluZCh0aGlzKTtcbiAgICB0aGlzLl9hcGkgPSBhcGlJbnN0YW5jZTtcbiAgICB0aGlzLl9idXR0b25EZWxldGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19zYXZlLWJ1dHRvbl9kZWxldGVcIik7XG4gIH1cbiAgX2hhbmRsZUNvbmZpcm0oZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICB9XG5cbiAgX2hhbmRsZUNsaWNrQ29uZmlybSgpIHtcbiAgICB0aGlzLl9idXR0b25EZWxldGUudGV4dENvbnRlbnQgPSBcIkVsaW1pbmFuZG8uLi5cIjtcbiAgICB0aGlzLl9hcGkuZGVsZXRlQ2FyZCh0aGlzLl9pZENhcmQpLnRoZW4oKCkgPT4ge1xuICAgICAgcmVtb3ZlQ2FyZCh0aGlzLl9jYXJkRWxlbWVudCk7XG4gICAgICB0aGlzLmNsb3NlKCk7XG4gICAgfSk7XG4gIH1cblxuICBvcGVuUG9wdXAoaWRDYXJkLCBjYXJkRWxlbWVudCkge1xuICAgIHRoaXMuX2NhcmRFbGVtZW50ID0gY2FyZEVsZW1lbnQ7XG4gICAgc3VwZXIub3BlbigpO1xuICAgIHRoaXMuX2J1dHRvbkRlbGV0ZS50ZXh0Q29udGVudCA9IFwiU8OtXCI7XG4gICAgdGhpcy5faWRDYXJkID0gaWRDYXJkO1xuICB9XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnRcbiAgICAgIC5xdWVyeVNlbGVjdG9yKFwiZm9ybVwiKVxuICAgICAgLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGV2ZW50KSA9PiB7XG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIHRoaXMuX2hhbmRsZUNsaWNrQ29uZmlybSgpO1xuICAgICAgfSk7XG5cbiAgICAvKiB0aGlzLl9idXR0b25EZWxldGUuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuX2hhbmRsZUNsaWNrQ29uZmlybSk7ICovXG4gIH1cbn1cbiIsImV4cG9ydCBjb25zdCBwaWN0dXJlQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19waWN0dXJlLWJ1dHRvblwiKTtcbmV4cG9ydCBjb25zdCBidXR0b25FZGl0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19idXR0b25cIik7XG5leHBvcnQgY29uc3QgcHJvZmlsZU5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX25hbWVcIik7XG5leHBvcnQgY29uc3QgcHJvZmlsZU9jY3VwYXRpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2Fib3V0LW1lXCIpO1xuZXhwb3J0IGNvbnN0IHByb2ZpbGVQaWN0dXJlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19waWN0dXJlXCIpO1xuZXhwb3J0IGNvbnN0IHByb2ZpbGVGb3JtID0gZG9jdW1lbnQuZm9ybXMuZWRpdDtcbmV4cG9ydCBjb25zdCBpbnB1dE5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19pbnB1dF9uYW1lXCIpO1xuZXhwb3J0IGNvbnN0IGlucHV0T2NjdXBhdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gIFwiLnBvcHVwX19pbnB1dF9vY2N1cGF0aW9uXCJcbik7XG5leHBvcnQgY29uc3QgaW5wdXRUaXRsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2lucHV0X3RpdGxlXCIpO1xuZXhwb3J0IGNvbnN0IGlucHV0VXJsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9faW5wdXRfbGlua1wiKTtcbmV4cG9ydCBjb25zdCBhZGRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2FkZC1idXR0b25cIik7XG5leHBvcnQgY29uc3QgZWxlbWVudHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRzXCIpO1xuZXhwb3J0IGNvbnN0IGJ1dHRvbkxpa2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRzX19oZWFydFwiKTtcbmV4cG9ydCBjb25zdCBwb3B1cEltYWdlU2VsZWN0b3IgPSBcIi5wb3B1cF9pbWFnZVwiO1xuZXhwb3J0IGNvbnN0IHBvcHVwQWRkU2VsZWN0b3IgPSBcIi5wb3B1cF9hZGQtYnV0dG9uXCI7XG5leHBvcnQgY29uc3QgcG9wdXBQcm9maWxlU2VsZWN0b3IgPSBcIi5wb3B1cFwiO1xuZXhwb3J0IGNvbnN0IHBvcHVwUGljdHVyZVNlbGVjdG9yID0gXCIucG9wdXBfcHJvZmlsZS1idXR0b25cIjtcbmV4cG9ydCBjb25zdCBwaWN0dXJlRm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2NvbnRlbnRfYWRkXCIpO1xuZXhwb3J0IGNvbnN0IGZvcm1Qcm9maWxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fY29udGVudFwiKTtcbmV4cG9ydCBjb25zdCBzYXZlQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fc2F2ZS1idXR0b25cIik7XG5leHBvcnQgY29uc3Qgc2F2ZUJ1dHRvbkF2YXRhciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gIFwiLnBvcHVwX19zYXZlLWJ1dHRvbl9hdmF0YXJcIlxuKTtcbmV4cG9ydCBjb25zdCBzYXZlQnV0dG9uUGljdHVyZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gIFwiLnBvcHVwX19zYXZlLWJ1dHRvbl9waWN0dXJlXCJcbik7XG5leHBvcnQgY29uc3QgcG9wdXBBdmF0YXJGb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9wcm9maWxlLWJ1dHRvblwiKTtcbmV4cG9ydCBjb25zdCBhdmF0YXJGb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fY29udGVudF9wcm9maWxlXCIpO1xuZXhwb3J0IGNvbnN0IGF2YXRhcklucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwb3B1cF9fYXZhdGFyLWlucHV0XCIpO1xuXG5pbXBvcnQgQnJvb2tseW4gZnJvbSBcIi4uL2ltYWdlcy9icm9va2x5bi5qcGdcIjtcbmltcG9ydCBUaW1lc1NxdWFyZSBmcm9tIFwiLi4vaW1hZ2VzL3RpbWVzc3F1YXJlLmpwZ1wiO1xuaW1wb3J0IFdhc2hpbmd0b24gZnJvbSBcIi4uL2ltYWdlcy93YXNoaW5ndG9uLmpwZ1wiO1xuaW1wb3J0IENsb3VkR2F0ZSBmcm9tIFwiLi4vaW1hZ2VzL2Nsb3VkZ2F0ZS5qcGdcIjtcbmltcG9ydCBNaWFtaUJlYWNoIGZyb20gXCIuLi9pbWFnZXMvTWlhbWliZWFjaC5qcGdcIjtcbmltcG9ydCBHb2xkZW5HYXRlIGZyb20gXCIuLi9pbWFnZXMvZ29sZGVuZ2F0ZS5qcGdcIjtcblxuZXhwb3J0IGNvbnN0IGluaXRpYWxDYXJkcyA9IFtcbiAge1xuICAgIG5hbWU6IFwiUHVlbnRlIGRlIEJyb29rbHluXCIsXG4gICAgbGluazogQnJvb2tseW4sXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIlRpbWVzIFNxdWFyZVwiLFxuICAgIGxpbms6IFRpbWVzU3F1YXJlLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJXYXNoaW5ndG9uIEQuQ1wiLFxuICAgIGxpbms6IFdhc2hpbmd0b24sXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIkNsb3VkIEdhdGVcIixcbiAgICBsaW5rOiBDbG91ZEdhdGUsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIk1pYW1pIEJlYWNoLCBGbG9yaWRhXCIsXG4gICAgbGluazogTWlhbWlCZWFjaCxcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiR29sZGVuIEdhdGUsIFNhbiBGcmFuY2lzY29cIixcbiAgICBsaW5rOiBHb2xkZW5HYXRlLFxuICB9LFxuXTtcbiIsImNsYXNzIEFwaSB7XG4gIGNvbnN0cnVjdG9yKGJhc2VVcmwsIGhlYWRlcnMpIHtcbiAgICB0aGlzLmJhc2VVcmwgPSBiYXNlVXJsO1xuICAgIHRoaXMuaGVhZGVycyA9IGhlYWRlcnM7XG4gIH1cblxuICBnZXRJbml0aWFsQ2FyZHMoKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuYmFzZVVybH0vY2FyZHNgLCB7IGhlYWRlcnM6IHRoaXMuaGVhZGVycyB9KVxuICAgICAgLnRoZW4oKHJlcykgPT4ge1xuICAgICAgICBpZiAoIXJlcy5vaykgdGhyb3cgbmV3IEVycm9yKGBTZXJ2ZXIgZXJyb3I6ICR7cmVzLnN0YXR1c31gKTtcbiAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG4gICAgICB9KVxuICAgICAgLmNhdGNoKChlcnJvcikgPT4gY29uc29sZS5lcnJvcihcIkVycm9yXCIsIGVycm9yKSk7XG4gIH1cblxuICBnZXRVc2VySW5mbygpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5iYXNlVXJsfS91c2Vycy9tZWAsIHtcbiAgICAgIGhlYWRlcnM6IHRoaXMuaGVhZGVycyxcbiAgICB9KVxuICAgICAgLnRoZW4oKHJlcykgPT4ge1xuICAgICAgICBpZiAoIXJlcy5vaykgdGhyb3cgbmV3IEVycm9yKGBTZXJ2ZXIgZXJyb3I6ICR7cmVzLnN0YXR1c31gKTtcbiAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG4gICAgICB9KVxuICAgICAgLmNhdGNoKChlcnJvcikgPT4gY29uc29sZS5lcnJvcihcIkVycm9yXCIsIGVycm9yKSk7XG4gIH1cblxuICB1cGRhdGVVc2VyKG5hbWUsIGFib3V0KSB7XG4gICAgY29uc29sZS5sb2coXCJ1cGRhdGUgdXNlclwiLCBuYW1lLCBhYm91dCk7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuYmFzZVVybH0vdXNlcnMvbWVgLCB7XG4gICAgICBoZWFkZXJzOiB0aGlzLmhlYWRlcnMsXG4gICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgbmFtZSxcbiAgICAgICAgYWJvdXQsXG4gICAgICB9KSxcbiAgICB9KVxuICAgICAgLnRoZW4oKHJlcykgPT4ge1xuICAgICAgICBpZiAoIXJlcy5vaykgdGhyb3cgbmV3IEVycm9yKGBFcnJvciBlbiBzZXJ2aWRvcjogJHtyZXMuc3RhdHVzfWApO1xuICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goKGVycm9yKSA9PiBjb25zb2xlLmVycm9yKFwiRXJyb3JcIiwgZXJyb3IpKTtcbiAgfVxuXG4gIHVwZGF0ZUF2YXRhcihhdmF0YXIpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5iYXNlVXJsfS91c2Vycy9tZS9hdmF0YXJgLCB7XG4gICAgICBoZWFkZXJzOiB0aGlzLmhlYWRlcnMsXG4gICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgYXZhdGFyLFxuICAgICAgfSksXG4gICAgfSlcbiAgICAgIC50aGVuKChyZXMpID0+IHtcbiAgICAgICAgaWYgKCFyZXMub2spIHRocm93IG5ldyBFcnJvcihgRXJyb3IgZW4gc2Vydmlkb3I6ICR7cmVzLnN0YXR1c31gKTtcbiAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG4gICAgICB9KVxuICAgICAgLmNhdGNoKChlcnJvcikgPT4gY29uc29sZS5lcnJvcihcIkVycm9yXCIsIGVycm9yKSk7XG4gIH1cblxuICBhZGRDYXJkKG5hbWUsIGxpbmspIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5iYXNlVXJsfS9jYXJkc2AsIHtcbiAgICAgIGhlYWRlcnM6IHRoaXMuaGVhZGVycyxcbiAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIG5hbWUsXG4gICAgICAgIGxpbmssXG4gICAgICB9KSxcbiAgICB9KVxuICAgICAgLnRoZW4oKHJlcykgPT4ge1xuICAgICAgICBpZiAoIXJlcy5vaykgdGhyb3cgbmV3IEVycm9yKGBFcnJvciBlbiBzZXJ2aWRvcjogJHtyZXMuc3RhdHVzfWApO1xuICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goKGVycm9yKSA9PiBjb25zb2xlLmVycm9yKFwiRXJyb3JcIiwgZXJyb3IpKTtcbiAgfVxuXG4gIGRlbGV0ZUNhcmQoaWRDYXJkKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuYmFzZVVybH0vY2FyZHMvJHtpZENhcmR9YCwge1xuICAgICAgaGVhZGVyczogdGhpcy5oZWFkZXJzLFxuICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBpZENhcmQsXG4gICAgICB9KSxcbiAgICB9KVxuICAgICAgLnRoZW4oKHJlcykgPT4ge1xuICAgICAgICBpZiAoIXJlcy5vaykgdGhyb3cgbmV3IEVycm9yKGBFcnJvciBlbiBzZXJ2aWRvcjogJHtyZXMuc3RhdHVzfWApO1xuICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goKGVycm9yKSA9PiBjb25zb2xlLmVycm9yKFwiRXJyb3JcIiwgZXJyb3IpKTtcbiAgfVxuXG4gIGxpa2VDYXJkKGlkKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuYmFzZVVybH0vY2FyZHMvbGlrZXMvJHtpZH1gLCB7XG4gICAgICBoZWFkZXJzOiB0aGlzLmhlYWRlcnMsXG4gICAgICBtZXRob2Q6IFwiUFVUXCIsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIGlkLFxuICAgICAgfSksXG4gICAgfSlcbiAgICAgIC50aGVuKChyZXMpID0+IHtcbiAgICAgICAgaWYgKCFyZXMub2spIHRocm93IG5ldyBFcnJvcihgRXJyb3IgZW4gc2Vydmlkb3I6ICR7cmVzLnN0YXR1c31gKTtcbiAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG4gICAgICB9KVxuICAgICAgLmNhdGNoKChlcnJvcikgPT4gY29uc29sZS5lcnJvcihcIkVycm9yXCIsIGVycm9yKSk7XG4gIH1cblxuICB1bmxpa2VDYXJkKGlkKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuYmFzZVVybH0vY2FyZHMvbGlrZXMvJHtpZH1gLCB7XG4gICAgICBoZWFkZXJzOiB0aGlzLmhlYWRlcnMsXG4gICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIGlkLFxuICAgICAgfSksXG4gICAgfSlcbiAgICAgIC50aGVuKChyZXMpID0+IHtcbiAgICAgICAgaWYgKCFyZXMub2spIHRocm93IG5ldyBFcnJvcihgRXJyb3IgZW4gc2Vydmlkb3I6ICR7cmVzLnN0YXR1c31gKTtcbiAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG4gICAgICB9KVxuICAgICAgLmNhdGNoKChlcnJvcikgPT4gY29uc29sZS5lcnJvcihcIkVycm9yXCIsIGVycm9yKSk7XG4gIH1cbn1cblxuZXhwb3J0IGNvbnN0IGFwaSA9IG5ldyBBcGkoXCJodHRwczovL2Fyb3VuZC5ub21vcmVwYXJ0aWVzLmNvL3YxL3dlYl9lc18xMlwiLCB7XG4gIGF1dGhvcml6YXRpb246IFwiZmEyNWQwYTAtMTc4My00ZDMzLTlkZDktY2E4ZjMzYTUzZTZkXCIsXG4gIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxufSk7XG4iLCJpbXBvcnQgQ2FyZCBmcm9tIFwiLi9zY3JpcHRzL0NhcmQuanNcIjtcbmltcG9ydCBGb3JtVmFsaWRhdG9yIGZyb20gXCIuL3NjcmlwdHMvRm9ybVZhbGlkYXRvci5qc1wiO1xuaW1wb3J0IHsgdmFsaWRhdGlvbkNvbmZpZywgY2hlY2tJc0xpa2VkIH0gZnJvbSBcIi4vc2NyaXB0cy91dGlscy5qc1wiO1xuaW1wb3J0IFNlY3Rpb24gZnJvbSBcIi4vc2NyaXB0cy9TZWN0aW9uLmpzXCI7XG5pbXBvcnQgUG9wdXBXaXRoSW1hZ2UgZnJvbSBcIi4vc2NyaXB0cy9Qb3B1cFdpdGhJbWFnZS5qc1wiO1xuaW1wb3J0IFBvcHVwV2l0aEZvcm0gZnJvbSBcIi4vc2NyaXB0cy9Qb3B1cFdpdGhGb3JtLmpzXCI7XG5pbXBvcnQgVXNlckluZm8gZnJvbSBcIi4vc2NyaXB0cy9Vc2VySW5mby5qc1wiO1xuaW1wb3J0IFwiLi9wYWdlcy9pbmRleC5jc3NcIjtcbmltcG9ydCBQb3B1cFdpdGhDb25maXJtYXRpb24gZnJvbSBcIi4vc2NyaXB0cy9Qb3B1cFdpdGhDb25maXJtYXRpb24uanNcIjtcbmltcG9ydCB7XG4gIGF2YXRhcklucHV0LFxuICBwb3B1cEF2YXRhckZvcm0sXG4gIHNhdmVCdXR0b24sXG4gIHNhdmVCdXR0b25BdmF0YXIsXG4gIHNhdmVCdXR0b25QaWN0dXJlLFxuICBwaWN0dXJlQnV0dG9uLFxuICBidXR0b25FZGl0LFxuICBwcm9maWxlTmFtZSxcbiAgcHJvZmlsZU9jY3VwYXRpb24sXG4gIHByb2ZpbGVQaWN0dXJlLFxuICBmb3JtUHJvZmlsZSxcbiAgaW5wdXROYW1lLFxuICBpbnB1dE9jY3VwYXRpb24sXG4gIGlucHV0VGl0bGUsXG4gIGlucHV0VXJsLFxuICBwaWN0dXJlRm9ybSxcbiAgYWRkQnV0dG9uLFxuICBpbml0aWFsQ2FyZHMsXG4gIGVsZW1lbnRzLFxuICBwb3B1cEFkZFNlbGVjdG9yLFxuICBwb3B1cFByb2ZpbGVTZWxlY3RvcixcbiAgcG9wdXBQaWN0dXJlU2VsZWN0b3IsXG4gIHBvcHVwSW1hZ2VTZWxlY3Rvcixcbn0gZnJvbSBcIi4vc2NyaXB0cy9Db25zdC5qc1wiO1xuaW1wb3J0IHsgYXBpIH0gZnJvbSBcIi4vdXRpbHMvQXBpLmpzXCI7XG5cbmNvbnN0IHBvcHVwQ29uZmlybSA9IG5ldyBQb3B1cFdpdGhDb25maXJtYXRpb24oXCIucG9wdXBfZXJhc2UtcGhvdG9cIiwgYXBpKTtcblxuYnV0dG9uRWRpdC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xuICBjb25zdCB1c2VyRGF0YSA9IHVzZXJJbmZvLmdldFVzZXJJbmZvKCk7XG4gIGlucHV0TmFtZS52YWx1ZSA9IHVzZXJEYXRhLnVzZXJOYW1lO1xuICBpbnB1dE9jY3VwYXRpb24udmFsdWUgPSB1c2VyRGF0YS51c2VyT2NjdXBhdGlvbjtcbiAgcG9wdXBQcm9maWxlLm9wZW4oKTtcbiAgRm9ybVZhbGlkYXRvclByb2ZpbGUuZW5hYmxlVmFsaWRhdGlvbigpO1xufSk7XG5cbmFkZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICBwb3B1cEFkZEJ1dHRvbi5vcGVuKCk7XG4gIGZvcm1WYWxpZGF0b3JDYXJkLmVuYWJsZVZhbGlkYXRpb24oKTtcbn0pO1xuXG5waWN0dXJlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIHBvcHVwUGljdHVyZVByb2ZpbGUub3BlbigpO1xuICBmb3JtVmFsaWRhdG9yQ2FyZC5lbmFibGVWYWxpZGF0aW9uKCk7XG59KTtcblxuY29uc3QgcG9wdXBJbWFnZSA9IG5ldyBQb3B1cFdpdGhJbWFnZShwb3B1cEltYWdlU2VsZWN0b3IpO1xuY29uc3QgcG9wdXBQcm9maWxlID0gbmV3IFBvcHVwV2l0aEZvcm0ocG9wdXBQcm9maWxlU2VsZWN0b3IsIChpbnB1dFZhbHVlcykgPT4ge1xuICBwcm9maWxlTmFtZS50ZXh0Q29udGVudCA9IGlucHV0VmFsdWVzLm5hbWU7XG4gIHByb2ZpbGVPY2N1cGF0aW9uLnRleHRDb250ZW50ID0gaW5wdXRPY2N1cGF0aW9uLnZhbHVlO1xuICBwb3B1cFByb2ZpbGUuY2xvc2UoKTtcbn0pO1xuXG5jb25zdCBwb3B1cFBpY3R1cmVQcm9maWxlID0gbmV3IFBvcHVwV2l0aEZvcm0oXG4gIHBvcHVwUGljdHVyZVNlbGVjdG9yLFxuICAoaW5wdXRWYWx1ZXMpID0+IHtcbiAgICBwcm9maWxlUGljdHVyZS5zcmMgPSBpbnB1dFZhbHVlcy5saW5rO1xuICAgIHBvcHVwUGljdHVyZVByb2ZpbGUuY2xvc2UoKTtcbiAgfVxuKTtcblxuY29uc3QgcG9wdXBBZGRCdXR0b24gPSBuZXcgUG9wdXBXaXRoRm9ybShwb3B1cEFkZFNlbGVjdG9yLCAoaW5wdXRWYWx1ZXMpID0+IHtcbiAgYXBpXG4gICAgLmFkZENhcmQoaW5wdXRWYWx1ZXMudGl0bGUsIGlucHV0VmFsdWVzLmxpbmspXG4gICAgLnRoZW4oKHJlcykgPT4ge1xuICAgICAgY29uc3QgY2FyZCA9IG5ldyBDYXJkKFxuICAgICAgICByZXMubmFtZSxcbiAgICAgICAgcmVzLmxpbmssXG4gICAgICAgIFwiI2NhcmQtdGVtcGxhdGVcIixcbiAgICAgICAgW10sXG4gICAgICAgIGZhbHNlLFxuICAgICAgICB0cnVlLFxuICAgICAgICB7XG4gICAgICAgICAgaGFuZGxlQ2FyZENsaWNrOiAoKSA9PiB7XG4gICAgICAgICAgICBwb3B1cEltYWdlLm9wZW4ocmVzLmxpbmssIHJlcy5uYW1lKTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIC8vdGhpcyBmdW5jdGlvbiBpcyBjYWxsZWQgd2hlbiB0aGUgbGlrZSBidXR0b24gaXMgY2xpY2tlZFxuICAgICAgICAgIGhhbmRsZUxpa2VCdXR0b25DbGljazogKGxpa2VzTnVtYmVyRWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgLy8gY2hlY2sgaWYgdGhlIGNhcmQgaXMgbGlrZWQgYnkgdGhlIGN1cnJlbnQgdXNlclxuICAgICAgICAgICAgY29uc3QgaXNMaWtlZEJ5Q3VycmVudFVzZXIgPSBjYXJkLmdldElzTGlrZWRCeUN1cnJlbnRVc2VyKCk7XG4gICAgICAgICAgICBpZiAoaXNMaWtlZEJ5Q3VycmVudFVzZXIpIHtcbiAgICAgICAgICAgICAgLy8gaWYgdGhlIGNhcmQgaXMgbGlrZWQgYnkgdGhlIGN1cnJlbnQgdXNlciwgdGhlbiByZW1vdmUgdGhlIGxpa2VcbiAgICAgICAgICAgICAgYXBpXG4gICAgICAgICAgICAgICAgLnVubGlrZUNhcmQocmVzLl9pZClcbiAgICAgICAgICAgICAgICAudGhlbigobGlrZVJlcykgPT4ge1xuICAgICAgICAgICAgICAgICAgLy8gc2V0IHRoZSBjYXJkIGFzIG5vdCBsaWtlZCBieSB0aGUgY3VycmVudCB1c2VyXG4gICAgICAgICAgICAgICAgICBjYXJkLnNldElzTGlrZWRCeUN1cnJlbnRVc2VyKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgIC8vIHVwZGF0ZSB0aGUgbnVtYmVyIG9mIGxpa2VzXG4gICAgICAgICAgICAgICAgICBsaWtlc051bWJlckVsZW1lbnQudGV4dENvbnRlbnQgPSBsaWtlUmVzLmxpa2VzLmxlbmd0aDtcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIC5jYXRjaCgoZXJyb3IpID0+IGNvbnNvbGUud2FybihlcnJvcikpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgLy8gaWYgdGhlIGNhcmQgaXMgbm90IGxpa2VkIGJ5IHRoZSBjdXJyZW50IHVzZXIsIHRoZW4gYWRkIHRoZSBsaWtlXG4gICAgICAgICAgICAgIGFwaVxuICAgICAgICAgICAgICAgIC5saWtlQ2FyZChyZXMuX2lkKVxuICAgICAgICAgICAgICAgIC50aGVuKChsaWtlUmVzKSA9PiB7XG4gICAgICAgICAgICAgICAgICAvLyBzZXQgdGhlIGNhcmQgYXMgbGlrZWQgYnkgdGhlIGN1cnJlbnQgdXNlclxuICAgICAgICAgICAgICAgICAgY2FyZC5zZXRJc0xpa2VkQnlDdXJyZW50VXNlcih0cnVlKTtcbiAgICAgICAgICAgICAgICAgIC8vIHVwZGF0ZSB0aGUgbnVtYmVyIG9mIGxpa2VzXG4gICAgICAgICAgICAgICAgICBsaWtlc051bWJlckVsZW1lbnQudGV4dENvbnRlbnQgPSBsaWtlUmVzLmxpa2VzLmxlbmd0aDtcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIC5jYXRjaCgoZXJyb3IpID0+IGNvbnNvbGUud2FybihlcnJvcikpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0sXG4gICAgICAgICAgaGFuZGxlRGVsZXRlQ2xpY2s6IChjYXJkRWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgcG9wdXBDb25maXJtLm9wZW5Qb3B1cChyZXMuX2lkLCBjYXJkRWxlbWVudCk7XG4gICAgICAgICAgfSxcbiAgICAgICAgfVxuICAgICAgKTtcbiAgICAgIGVsZW1lbnRzLnByZXBlbmQoY2FyZC5nZW5lcmF0ZUNhcmQoKSk7XG4gICAgfSlcbiAgICAuY2F0Y2goKGVycm9yKSA9PiB7XG4gICAgICBjb25zb2xlLndhcm4oYGVycm9yOiR7ZXJyb3IubWVzc2FnZX1gKTtcbiAgICB9KTtcbn0pO1xuXG5jb25zdCB1c2VySW5mbyA9IG5ldyBVc2VySW5mbyh7XG4gIHVzZXJOYW1lU2VsZWN0b3I6IFwiLnByb2ZpbGVfX25hbWVcIixcbiAgb2NjdXBhdGlvblNlbGVjdG9yOiBcIi5wcm9maWxlX19hYm91dC1tZVwiLFxufSk7XG5cbi8vTUVUT0RPUyBERUwgU0VSVkVSXG5cbmFwaVxuICAuZ2V0VXNlckluZm8oKVxuICAudGhlbigodXNlckRhdGEpID0+IHtcbiAgICBwcm9maWxlTmFtZS50ZXh0Q29udGVudCA9IHVzZXJEYXRhLm5hbWU7XG4gICAgcHJvZmlsZU9jY3VwYXRpb24udGV4dENvbnRlbnQgPSB1c2VyRGF0YS5hYm91dDtcbiAgICBwcm9maWxlUGljdHVyZS5zcmMgPSB1c2VyRGF0YS5hdmF0YXI7XG4gICAgcHJvZmlsZVBpY3R1cmUuYWx0ID0gdXNlckRhdGEubmFtZTtcbiAgICB1c2VySW5mby5zZXRVc2VySWQodXNlckRhdGEuX2lkKTtcbiAgfSlcbiAgLmNhdGNoKChlcnJvcikgPT4ge1xuICAgIGNvbnNvbGUud2FybihgZXJyb3I6JHtlcnJvci5tZXNzYWdlfWApO1xuICB9KTtcblxuYXBpLmdldEluaXRpYWxDYXJkcygpLnRoZW4oKGNhcmRzKSA9PiB7XG4gIGNvbnN0IHVzZXJJZCA9IHVzZXJJbmZvLmdldFVzZXJJZCgpO1xuXG4gIGNvbnN0IGNhcmRzU2VjdGlvbiA9IG5ldyBTZWN0aW9uKFxuICAgIHtcbiAgICAgIGl0ZW1zOiBjYXJkcyxcbiAgICAgIHJlbmRlcmVyOiAoaXRlbSkgPT4ge1xuICAgICAgICBjb25zdCBpc093bmVkQnlVc2VyID0gdXNlcklkID09PSBpdGVtLm93bmVyLl9pZDtcbiAgICAgICAgLy8gY2hlY2sgaWYgdGhlIGNhcmQgaXMgbGlrZWQgYnkgdGhlIGN1cnJlbnQgdXNlciBmcm9tIHRoZSBzZXJ2ZXIgZGF0YVxuICAgICAgICBjb25zdCBpc0xpa2VkQnlDdXJyZW50VXNlciA9IGNoZWNrSXNMaWtlZChpdGVtLmxpa2VzLCB1c2VySWQpO1xuICAgICAgICBjb25zdCBjYXJkID0gbmV3IENhcmQoXG4gICAgICAgICAgaXRlbS5uYW1lLFxuICAgICAgICAgIGl0ZW0ubGluayxcbiAgICAgICAgICBcIiNjYXJkLXRlbXBsYXRlXCIsXG4gICAgICAgICAgaXRlbS5saWtlcyxcbiAgICAgICAgICBpc0xpa2VkQnlDdXJyZW50VXNlcixcbiAgICAgICAgICBpc093bmVkQnlVc2VyLFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIGhhbmRsZUNhcmRDbGljazogKCkgPT4ge1xuICAgICAgICAgICAgICBwb3B1cEltYWdlLm9wZW4oaXRlbS5saW5rLCBpdGVtLm5hbWUpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIC8vdGhpcyBmdW5jdGlvbiBpcyBjYWxsZWQgd2hlbiB0aGUgbGlrZSBidXR0b24gaXMgY2xpY2tlZFxuICAgICAgICAgICAgaGFuZGxlTGlrZUJ1dHRvbkNsaWNrOiAobGlrZXNOdW1iZXJFbGVtZW50KSA9PiB7XG4gICAgICAgICAgICAgIC8vIGNoZWNrIGlmIHRoZSBjYXJkIGlzIGxpa2VkIGJ5IHRoZSBjdXJyZW50IHVzZXJcbiAgICAgICAgICAgICAgY29uc3QgaXNMaWtlZEJ5Q3VycmVudFVzZXIgPSBjYXJkLmdldElzTGlrZWRCeUN1cnJlbnRVc2VyKCk7XG4gICAgICAgICAgICAgIGlmIChpc0xpa2VkQnlDdXJyZW50VXNlcikge1xuICAgICAgICAgICAgICAgIC8vIGlmIHRoZSBjYXJkIGlzIGxpa2VkIGJ5IHRoZSBjdXJyZW50IHVzZXIsIHRoZW4gcmVtb3ZlIHRoZSBsaWtlXG4gICAgICAgICAgICAgICAgYXBpXG4gICAgICAgICAgICAgICAgICAudW5saWtlQ2FyZChpdGVtLl9pZClcbiAgICAgICAgICAgICAgICAgIC50aGVuKChyZXMpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgLy8gc2V0IHRoZSBjYXJkIGFzIG5vdCBsaWtlZCBieSB0aGUgY3VycmVudCB1c2VyXG4gICAgICAgICAgICAgICAgICAgIGNhcmQuc2V0SXNMaWtlZEJ5Q3VycmVudFVzZXIoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAvLyB1cGRhdGUgdGhlIG51bWJlciBvZiBsaWtlc1xuICAgICAgICAgICAgICAgICAgICBsaWtlc051bWJlckVsZW1lbnQudGV4dENvbnRlbnQgPSByZXMubGlrZXMubGVuZ3RoO1xuICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgIC5jYXRjaCgoZXJyb3IpID0+IGNvbnNvbGUud2FybihlcnJvcikpO1xuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIGlmIHRoZSBjYXJkIGlzIG5vdCBsaWtlZCBieSB0aGUgY3VycmVudCB1c2VyLCB0aGVuIGFkZCB0aGUgbGlrZVxuICAgICAgICAgICAgICAgIGFwaVxuICAgICAgICAgICAgICAgICAgLmxpa2VDYXJkKGl0ZW0uX2lkKVxuICAgICAgICAgICAgICAgICAgLnRoZW4oKHJlcykgPT4ge1xuICAgICAgICAgICAgICAgICAgICAvLyBzZXQgdGhlIGNhcmQgYXMgbGlrZWQgYnkgdGhlIGN1cnJlbnQgdXNlclxuICAgICAgICAgICAgICAgICAgICBjYXJkLnNldElzTGlrZWRCeUN1cnJlbnRVc2VyKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAvLyB1cGRhdGUgdGhlIG51bWJlciBvZiBsaWtlc1xuICAgICAgICAgICAgICAgICAgICBsaWtlc051bWJlckVsZW1lbnQudGV4dENvbnRlbnQgPSByZXMubGlrZXMubGVuZ3RoO1xuICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgIC5jYXRjaCgoZXJyb3IpID0+IGNvbnNvbGUud2FybihlcnJvcikpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgaGFuZGxlRGVsZXRlQ2xpY2s6IChjYXJkRWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgICBwb3B1cENvbmZpcm0ub3BlblBvcHVwKGl0ZW0uX2lkLCBjYXJkRWxlbWVudCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICAgICAgY2FyZHNTZWN0aW9uLmFkZEl0ZW0oY2FyZC5nZW5lcmF0ZUNhcmQoKSk7XG4gICAgICB9LFxuICAgIH0sXG4gICAgXCIuZWxlbWVudHNcIlxuICApO1xuXG4gIGNhcmRzU2VjdGlvbi5yZW5kZXJlcigpO1xufSk7XG5cbmNvbnN0IG5ld1VzZXJJbmZvID0gbmV3IFVzZXJJbmZvKHByb2ZpbGVOYW1lLCBwcm9maWxlT2NjdXBhdGlvbik7XG5idXR0b25FZGl0LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIHByb2ZpbGVGb3JtLm9wZW4oKTtcbiAgc2F2ZUJ1dHRvbi50ZXh0Q29udGVudCA9IFwiR3VhcmRhclwiO1xuICBwcm9maWxlRm9ybS5fZ2V0SW5wdXRWYWx1ZXMoKTtcbn0pO1xuXG5jb25zdCBwcm9maWxlRm9ybSA9IG5ldyBQb3B1cFdpdGhGb3JtKFwiLnBvcHVwXCIsIChpbnB1dFZhbHVlcykgPT4ge1xuICBzYXZlQnV0dG9uLnRleHRDb250ZW50ID0gXCJHdWFyZGFuZG8uLi5cIjtcblxuICBhcGkudXBkYXRlVXNlcihpbnB1dFZhbHVlcy5uYW1lLCBpbnB1dFZhbHVlcy5vY2N1cGF0aW9uKTtcbiAgLyogICAudGhlbigobmV3VXNlcikgPT4ge1xuICAgICAgbmV3VXNlckluZm8uc2V0VXNlckluZm8oe1xuICAgICAgICBuYW1lOiBpbnB1dFZhbHVlcy5uYW1lLFxuICAgICAgICBhYm91dDogaW5wdXRWYWx1ZXMub2NjdXBhdGlvbixcbiAgICAgIH0pO1xuICAgIH0pXG4gICAgLmNhdGNoKChlcnJvcikgPT4ge1xuICAgICAgY29uc29sZS5lcnJvcihcIkhhIHN1cmdpZG8gdW4gZXJyb3JcIiwgZXJyb3IpO1xuICAgIH0pOyAqL1xufSk7XG5cbmZ1bmN0aW9uIGNvbnRhaW5lckNhcmQoY2FyZFNlY3Rpb24pIHtcbiAgY29uc3QgcGljdHVyZUZvcm0gPSBuZXcgUG9wdXBXaXRoRm9ybShcIi5wb3B1cF9hZGQtYnV0dG9uXCIsICgpID0+IHtcbiAgICBjb25zdCBuYW1lQ2FyZCA9IGlucHV0VGl0bGUudmFsdWU7XG4gICAgY29uc3QgbGlua0NhcmQgPSBpbnB1dFVybC52YWx1ZTtcbiAgICBzYXZlQnV0dG9uLnRleHRDb250ZW50ID0gXCJHdWFyZGFuZG8uLi5cIjtcbiAgICBhcGkuYWRkQ2FyZChuYW1lQ2FyZCwgbGlua0NhcmQpLnRoZW4oKGNhcmQpID0+IHtcbiAgICAgIGxldCB1c2VySWQgPSBjYXJkLm93bmVyLl9pZDtcbiAgICAgIGNvbnN0IGNyZWF0ZU9uZUNhcmQgPSBuZXcgQ2FyZChcbiAgICAgICAgY2FyZCxcbiAgICAgICAgXCIjY2FyZC10ZW1wbGF0ZVwiLFxuICAgICAgICBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgcG9wdXBJbWFnZS5vcGVuKG5hbWVDYXJkLCBsaW5rQ2FyZCk7XG4gICAgICAgIH0sXG4gICAgICAgIHJlbW90ZUxpa2UsXG4gICAgICAgIHJlbW90ZVJlbW92ZUxpa2UsXG4gICAgICAgIHVzZXJJZCxcbiAgICAgICAgcG9wdXBDb25maXJtXG4gICAgICApO1xuICAgICAgY29uc3QgY2FyZEVsZW1lbnQgPSBjcmVhdGVPbmVDYXJkLmdlbmVyYXRlQ2FyZCgpO1xuICAgICAgY2FyZFNlY3Rpb24uYWRkSXRlbShjYXJkRWxlbWVudCwgdHJ1ZSk7XG4gICAgICBzYXZlQnV0dG9uUGljdHVyZS50ZXh0Q29udGVudCA9IFwiQ3JlYXJcIjtcbiAgICAgIGlucHV0VGl0bGUudmFsdWUgPSBcIlwiO1xuICAgICAgaW5wdXRVcmwudmFsdWUgPSBcIlwiO1xuICAgIH0pO1xuICB9KTtcbiAgYWRkQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgcGljdHVyZUZvcm0ub3BlbigpO1xuICB9KTtcbiAgc2F2ZUJ1dHRvblBpY3R1cmUuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICBwaWN0dXJlRm9ybS5jbG9zZSgpO1xuICB9KTtcbn1cblxucG9wdXBBdmF0YXJGb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGV2ZW50KSA9PiB7XG4gIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gIHNhdmVCdXR0b25BdmF0YXIudGV4dENvbnRlbnQgPSBcIkd1YXJkYW5kby4uLlwiO1xuICBhcGlcbiAgICAudXBkYXRlQXZhdGFyKGF2YXRhcklucHV0LnZhbHVlKVxuICAgIC50aGVuKChyZXMpID0+IHtcbiAgICAgIHByb2ZpbGVQaWN0dXJlLnNyYyA9IHJlcy5hdmF0YXI7XG4gICAgICBwcm9maWxlUGljdHVyZS5hbHQgPSBcIkF2YXRhclwiO1xuICAgICAgc2F2ZUJ1dHRvbkF2YXRhci50ZXh0Q29udGVudCA9IFwiR3VhcmRhclwiO1xuICAgICAgYXZhdGFySW5wdXQudmFsdWUgPSBcIlwiO1xuICAgIH0pXG4gICAgLmNhdGNoKChlcnJvcikgPT4ge1xuICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yXCIsIGVycm9yKTtcbiAgICB9KTtcbn0pO1xuXG4vKiBleHBvcnQgZnVuY3Rpb24gZm9ybVN1Ym1pdEhhbmRsZXIoZm9ybVZhbHVlcykge1xuICBjb25zdCBuYW1lID0gZm9ybVZhbHVlc1tcImlucHV0LW5hbWVcIl07XG4gIGNvbnN0IGFib3V0ID0gZm9ybVZhbHVlc1tcIm9jY3VwYXRpb25cIl07XG4gIHNhdmVCdXR0b24udGV4dENvbnRlbnQgPSBcIkd1YXJkYW5kby4uLlwiO1xuICBhcGlcbiAgICAudXBkYXRlVXNlcihuYW1lLCBhYm91dClcbiAgICAudGhlbigodXNlckRhdGEpID0+IHtcbiAgICAgIHVzZXJJbmZvLnNldFVzZXJJbmZvKHtcbiAgICAgICAgdXNlck5hbWU6IHVzZXJEYXRhLm5hbWUsXG4gICAgICAgIHVzZXJPY2N1cGF0aW9uOiB1c2VyRGF0YS5hYm91dCxcbiAgICAgIH0pO1xuICAgICAgc2F2ZUJ1dHRvbi50ZXh0Q29udGVudCA9IFwiR3VhcmRhclwiO1xuICAgIH0pXG4gICAgLmNhdGNoKChlcnJvcikgPT4ge1xuICAgICAgY29uc29sZS5lcnJvcihcIkhhIHN1cmdpZG8gdW4gZXJyb3I6XCIsIGVycm9yKTtcbiAgICB9KTtcblxuICBwb3B1cFByb2ZpbGVTZWxlY3Rvci5jbG9zZSgpO1xufSAqL1xuXG5jb25zdCBGb3JtVmFsaWRhdG9yUHJvZmlsZSA9IG5ldyBGb3JtVmFsaWRhdG9yKHZhbGlkYXRpb25Db25maWcsIGZvcm1Qcm9maWxlKTtcbkZvcm1WYWxpZGF0b3JQcm9maWxlLmVuYWJsZVZhbGlkYXRpb24oKTtcblxuY29uc3QgZm9ybVZhbGlkYXRvckNhcmQgPSBuZXcgRm9ybVZhbGlkYXRvcih2YWxpZGF0aW9uQ29uZmlnLCBwaWN0dXJlRm9ybSk7XG5mb3JtVmFsaWRhdG9yQ2FyZC5lbmFibGVWYWxpZGF0aW9uKCk7XG4iXSwibmFtZXMiOlsiX193ZWJwYWNrX3JlcXVpcmVfXyIsInZhbGlkYXRpb25Db25maWciLCJmb3JtU2VsZWN0b3IiLCJpbnB1dFNlbGVjdG9yIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJpbmFjdGl2ZUJ1dHRvbmNsYXNzIiwiaW5wdXRFcnJvckNsYXNzIiwiZXJyb3JDbGFzcyIsIkNhcmQiLCJuYW1lIiwibGluayIsInRlbXBsYXRlU2VsZWN0b3IiLCJsaWtlcyIsImlzTGlrZWRCeUN1cnJlbnRVc2VyIiwiaXNPd25lZEJ5VXNlciIsIl9yZWYiLCJoYW5kbGVDYXJkQ2xpY2siLCJoYW5kbGVMaWtlQnV0dG9uQ2xpY2siLCJoYW5kbGVEZWxldGVDbGljayIsIl9jbGFzc0NhbGxDaGVjayIsInRoaXMiLCJfaGFuZGxlQ2FyZENsaWNrIiwiX2hhbmRsZUxpa2VCdXR0b25DbGljayIsIl9oYW5kbGVEZWxldGVDbGljayIsImtleSIsInZhbHVlIiwibGlrZXNOdW1iZXIiLCJsZW5ndGgiLCJjYXJkRWxlbWVudCIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJ0ZXh0Q29udGVudCIsImhlYXJ0SWNvbiIsImNsYXNzTGlzdCIsImFkZCIsImNhcmRJbWFnZSIsInNyYyIsImFsdCIsIl90aGlzIiwib3BlbkltYWdlIiwiX2NhcmRFbGVtZW50IiwiYnV0dG9uTGlrZSIsImJ1dHRvbkRlbGV0ZSIsImxpa2VOdW1iZXIiLCJhZGRFdmVudExpc3RlbmVyIiwidG9nZ2xlIiwiX2dldFRlbXBsYXRlIiwiX3NldEV2ZW50TGlzdGVuZXJzIiwicmVtb3ZlIiwiRm9ybVZhbGlkYXRvciIsImZvcm1FbGVtZW50IiwiZm9ybSIsImVycm9yU2VsZWN0b3IiLCJlcnJvckVsZW1lbnQiLCJjb25maWciLCJlcnJvck1lc3NhZ2UiLCJpbnB1dCIsInZhbGlkaXR5IiwidmFsaWQiLCJfaGlkZUlucHV0RXJyb3IiLCJjb25jYXQiLCJfc2hvd0lucHV0RXJyb3IiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsIl90b2dnbGVCdXR0b24iLCJpbnB1dHMiLCJBcnJheSIsImZyb20iLCJxdWVyeVNlbGVjdG9yQWxsIiwic3VibWl0QnV0dG9uIiwiZXZlcnkiLCJpdGVtIiwiZGlzYWJsZWQiLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiZm9ybXMiLCJmb3JFYWNoIiwiZXZlbnQiLCJwcmV2ZW50RGVmYXVsdCIsIl9jaGVja0lucHV0VmFsaWRpdHkiLCJTZWN0aW9uIiwiY29udGFpbmVyU2VsZWN0b3IiLCJpdGVtcyIsInJlbmRlcmVyIiwiX2l0ZW1zIiwiX3JlbmRlcmVyIiwiX2NvbnRhaW5lciIsImlubmVySFRNTCIsImFwcGVuZENoaWxkIiwiY2xlYXIiLCJQb3B1cCIsInBvcHVwU2VsZWN0b3IiLCJfcG9wdXBFbGVtZW50IiwiX3BvcHVwQ2xvc2VCdXR0b24iLCJfcG9wdXBDbG9zZU92ZXJsYXkiLCJfaGFuZGxlRXNjQ2xvc2UiLCJiaW5kIiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiY2xvc2UiLCJQb3B1cFdpdGhJbWFnZSIsIl9Qb3B1cCIsIl9jYWxsU3VwZXIiLCJfcG9wdXBJbWFnZSIsIl9wb3B1cFRpdGxlIiwiX2luaGVyaXRzIiwiX2dldCIsIl9nZXRQcm90b3R5cGVPZiIsInByb3RvdHlwZSIsImNhbGwiLCJQb3B1cFdpdGhGb3JtIiwiY2FsbGJhY2siLCJfc3VibWl0Q2FsbEJhY2siLCJpbnB1dFZhbHVlcyIsIl90aGlzMiIsIl9nZXRJbnB1dFZhbHVlcyIsInVzZXJJbmZvIiwidXNlcklkIiwidXNlck5hbWVTZWxlY3RvciIsIm9jY3VwYXRpb25TZWxlY3RvciIsIl91c2VyTmFtZSIsIl91c2VyT2NjdXBhdGlvbiIsIl91c2VySWQiLCJpZCIsInVzZXJOYW1lIiwidXNlck9jY3VwYXRpb24iLCJfcmVmMiIsImFib3V0IiwiY29uc29sZSIsImxvZyIsIlBvcHVwV2l0aENvbmZpcm1hdGlvbiIsImFwaUluc3RhbmNlIiwiX2hhbmRsZUNvbmZpcm0iLCJfYXNzZXJ0VGhpc0luaXRpYWxpemVkIiwiX2hhbmRsZUNsaWNrQ29uZmlybSIsIl9hcGkiLCJfYnV0dG9uRGVsZXRlIiwiZGVsZXRlQ2FyZCIsIl9pZENhcmQiLCJ0aGVuIiwiaWRDYXJkIiwiX3RoaXMzIiwicGljdHVyZUJ1dHRvbiIsImJ1dHRvbkVkaXQiLCJwcm9maWxlTmFtZSIsInByb2ZpbGVPY2N1cGF0aW9uIiwicHJvZmlsZVBpY3R1cmUiLCJpbnB1dE5hbWUiLCJlZGl0IiwiaW5wdXRPY2N1cGF0aW9uIiwiYWRkQnV0dG9uIiwiZWxlbWVudHMiLCJwaWN0dXJlRm9ybSIsImZvcm1Qcm9maWxlIiwic2F2ZUJ1dHRvbiIsInNhdmVCdXR0b25BdmF0YXIiLCJwb3B1cEF2YXRhckZvcm0iLCJhdmF0YXJJbnB1dCIsImFwaSIsIkFwaSIsImJhc2VVcmwiLCJoZWFkZXJzIiwiZmV0Y2giLCJyZXMiLCJvayIsIkVycm9yIiwic3RhdHVzIiwianNvbiIsImNhdGNoIiwiZXJyb3IiLCJtZXRob2QiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsImF2YXRhciIsImF1dGhvcml6YXRpb24iLCJwb3B1cENvbmZpcm0iLCJ1c2VyRGF0YSIsImdldFVzZXJJbmZvIiwicG9wdXBQcm9maWxlIiwib3BlbiIsIkZvcm1WYWxpZGF0b3JQcm9maWxlIiwiZW5hYmxlVmFsaWRhdGlvbiIsInBvcHVwQWRkQnV0dG9uIiwiZm9ybVZhbGlkYXRvckNhcmQiLCJwb3B1cFBpY3R1cmVQcm9maWxlIiwicG9wdXBJbWFnZSIsImFkZENhcmQiLCJ0aXRsZSIsImNhcmQiLCJsaWtlc051bWJlckVsZW1lbnQiLCJnZXRJc0xpa2VkQnlDdXJyZW50VXNlciIsInVubGlrZUNhcmQiLCJfaWQiLCJsaWtlUmVzIiwic2V0SXNMaWtlZEJ5Q3VycmVudFVzZXIiLCJ3YXJuIiwibGlrZUNhcmQiLCJvcGVuUG9wdXAiLCJwcmVwZW5kIiwiZ2VuZXJhdGVDYXJkIiwibWVzc2FnZSIsIlVzZXJJbmZvIiwic2V0VXNlcklkIiwiZ2V0SW5pdGlhbENhcmRzIiwiY2FyZHMiLCJnZXRVc2VySWQiLCJjYXJkc1NlY3Rpb24iLCJvd25lciIsImZpbmQiLCJsaWtlIiwiY2hlY2tJc0xpa2VkIiwiYWRkSXRlbSIsInByb2ZpbGVGb3JtIiwidXBkYXRlVXNlciIsIm9jY3VwYXRpb24iLCJ1cGRhdGVBdmF0YXIiXSwic291cmNlUm9vdCI6IiJ9